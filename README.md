# 仮想SMTPサーバー

このプロジェクトは、開発・テスト用の仮想SMTPサーバーを提供します。実際のメール送信を行わずに、メール送信機能のテストや開発を行うことができます。

## 主な機能

- SMTPサーバーのエミュレーション
- 受信したメールのWebインターフェースでの表示
- メールの永続化（SQLiteデータベース）
- 添付ファイルのサポート
- 自動クリーンアップ機能（古いメールの自動削除）
- サーバー情報の常時表示（SMTP・Web接続情報）

## 必要条件

- Python 3.7以上
- 必要なPythonパッケージ（requirements.txtに記載）

## インストール方法

1. 必要なパッケージをインストールします：
```bash
pip install -r requirements.txt
```

2. 環境変数を設定します：
`.env`ファイルを作成し、以下の設定を行います：
```
SMTP_SERVER=0.0.0.0
SMTP_PORT=25
SENDER_EMAIL=noreply@example.com
LOG_DIR=logs
DB_FILE=emails.db
RETENTION_DAYS=7
```

## 使用方法

1. サーバーを起動します：
```bash
python start.py
```

2. Webインターフェースにアクセスします：
ブラウザで `http://localhost:5000` を開きます。

3. メールの送信テスト：
任意のメールクライアントを使用して、設定したSMTPサーバー（localhost:25）にメールを送信します。

## 機能の詳細

### Webインターフェース

- 受信したメールの一覧表示
- メールの詳細表示（本文、HTML形式、添付ファイル）
- メールの削除機能
- 手動リフレッシュ機能
- 全メールのクリア機能
- サーバー情報の表示（右上に常時表示）
  - SMTPサーバーのアドレスとポート
  - Webインターフェースのアクセスリンク

### データ管理

- メールはSQLiteデータベースに保存されます
- 設定された保持期間（デフォルト7日）を超えたメールは自動的に削除されます
- 添付ファイルは`attachments`ディレクトリに保存されます

### ログ機能

- サーバーの動作ログは`logs`ディレクトリに保存されます
- ログファイルは日付ごとにローテーションされます

## 注意事項

- このサーバーは開発・テスト目的のみに使用してください
- 本番環境での使用は推奨されません
- セキュリティ機能は最小限の実装となっています

## ライセンス

MIT License 